var jde={addLoadEvent:function(e){"use strict";if("function"==typeof e){var t=window.onload;window.onload="function"!=typeof window.onload?e:function(){t(),e()}}},get_config:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]==e)return r[1]}return!1},set_attr:function(e,t,n){"use strict";var i=e;i.setAttribute(t,n)},set_href:function(e,t){"use strict";var n=e;n.setAttribute("href",t)},set_title:function(e,t){"use strict";var n=e;n.setAttribute("title",t)},set_class:function(e,t){"use strict";var n=e;n.classList.add(t)},set_id:function(e,t){"use strict";var n=e;n.setAttribute("id",t)},set_width:function(e,t){"use strict";var n=e;n.setAttribute("width",t)},set_height:function(e,t){"use strict";var n=e;n.setAttribute("height",t)},remove_class:function(e,t){"use strict";var n=e;n.classList.remove(t)},addEventListenerByClass:function(e,t,n){for(var i=document.getElementsByClassName(e),r=0,o=i.length;o>r;r++)i[r].addEventListener(t,n,!1)},create_link:function(e,t,n,i){"use strict";var r=document.createElement("a");return this.set_title(r,e),this.set_href(r,t),this.set_attr(r,"id",n),this.set_attr(r,"onclick",i),r},get_cNode:function(e,t,n){"use strict";var i=t.getElementsByClassName(e),r=i.length;return r>0&&r>n?i[n]:!1},xhr:function(e,t,n,i,r){"use strict";var o,s=new XMLHttpRequest,c=null;t&&(c=0===t.indexOf("/")?t.substring(1):t,s.onreadystatechange=function(){4===s.readyState&&(200===s.status&&i?i(s):r&&r(s))},s.open(e,c,!0),n&&(o=JSON.stringify(n),s.setRequestHeader("Content-type","application/json")),s.setRequestHeader("Accept","application/json, application/xml, text/html, text/plain"),n?s.send(o):s.send())},set_textNode:function(e,t){"use strict";var n=document.createTextNode(e);t.appendChild(n)}};HTMLElement.prototype.empty=function(){for(var e=this;e.hasChildNodes();)e.removeChild(e.lastChild)};var err_head="Es ist ein Fehler aufgetreten",err_txt="Die Daten konnten nicht geladen werden.",configs=["/data/die_umsiedlerin.json","/data/der_bau.json","/data/uebungen/ue2_1.json","/data/uebungen/ue2_2.json","/data/uebungen/ue2_3.json"];currentConfigId=0,ec=0,oc=0,$textbox=null,$back=null,$objbox=null,$doc=document,$body=$doc.body,$back=$doc.getElementById("back"),$title=$doc.getElementById("main_title"),$article=$doc.getElementsByTagName("article").item(0),$left=$doc.getElementById("left"),$middle=$doc.getElementById("middle"),$right=$doc.getElementById("right"),$tpls=$doc.getElementById("templates"),$tpl_mediabox=$tpls.getElementsByClassName("media_link")[0],$tpl_excerpt=$doc.getElementById("excerpt"),$tpl_obj=$doc.getElementById("obj"),$errorbox=$doc.getElementById("statusbox"),$errortxt=$doc.getElementById("errortxt"),$errorhead=$doc.getElementById("errorhead"),$tpl_mediabox.parentNode.removeChild($tpl_mediabox),$tpl_excerpt.parentNode.removeChild($tpl_excerpt),$tpl_obj.parentNode.removeChild($tpl_obj);var alertDesc=function(e){"use strict";if($objbox){var t=$objbox.querySelector(".more"),n=$objbox.querySelector(".more img"),i=jde.create_link("Bildbeschreibung anzeigen","final_index.html","morelink","show_description('"+e+"'); return false;");i.appendChild(n),t.appendChild(i)}},set_nextJsonConfig=function(){"use strict";currentConfigId<configs.length-1?currentConfigId+=1:currentConfigId=0},get_nextJsonConfig=function(){"use strict";var e;return e=currentConfigId<configs.length-1?currentConfigId+1:0},get_jsonConfig=function(){"use strict";return currentConfigId},show_description=function(e){"use strict";alert(e)},switchViews=function(){"use strict";if($textbox&&$back){var e=jde.get_cNode("more",$textbox,0);if(e){var t=jde.create_link("Den kompletten Text anzeigen","index.html","morelink","show_animatedDetail(); return false;"),n=document.createTextNode("Weiter lesen ...");t.appendChild(n),e.appendChild(t)}build_backlink()}},build_backlink=function(){if($back){var e=jde.create_link("Zurück zur Übersicht","index.html","backlink","show_animatedOverview(); return false;"),t=document.createTextNode("Zurück"),n=document.createElement("span");n.appendChild(t),e.appendChild(n),$back.appendChild(e)}},show_simpleDetail=function(){"use strict";jde.set_id($body,"detail")},show_simpleOverview=function(){"use strict";jde.set_id($body,"overview")},timer,_isOverview=!0,_isAnimated=!1,is_overview=function(){"use strict";return _isOverview},set_overview=function(e){"use strict";_isOverview=e},is_animated=function(){"use strict";return _isAnimated},set_animated=function(e){"use strict";_isAnimated=e},clear=function(e){"use strict";clearTimeout(e),set_animated(!1)},end_animation=function(e){"use strict";"opacity"==e.propertyName&&(jde.remove_class($article,"hide"),jde.remove_class($article,"show"),jde.remove_class($body,"view"),$body.removeEventListener("transitionend",end_animation,!1))},show_article=function(e){jde.set_class($article,"show"),jde.remove_class($article,"hide"),clear(e)},show_view=function(e){"use strict";"opacity"==e.propertyName&&($body.removeEventListener("transitionend",show_view,!1),jde.set_class($body,"view"),is_overview()?jde.set_id($body,"detail"):jde.set_id($body,"overview"),timer=setTimeout(function(){show_article()},500),$body.addEventListener("transitionend",end_animation,!1),set_overview(!is_overview()))},show_overview=function(){"use strict";jde.set_id($body,"overview"),jde.set_class($article,"show"),set_overview(!0)},show_animatedDetail=function(){"use strict";$article?!is_animated()&&is_overview()&&(jde.set_class($article,"hide"),set_animated(!0),$body.addEventListener("transitionend",show_view,!1)):show_simpleDetail()},show_animatedOverview=function(){"use strict";$article?is_animated()||is_overview()||(jde.set_class($article,"hide"),set_animated(!0),$body.addEventListener("transitionend",show_view,!1)):show_simpleOverview()};build_errorcontent=function(){"use strict";$errorhead.empty(),jde.set_textNode(err_head,$errorhead),$errortxt.empty(),jde.set_textNode(err_txt,$errortxt),$errorbox.style.display="block"},build_mediabox=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(t){var n=$tpl_mediabox.cloneNode(!0);jde.set_textNode(e.title||"Medien",n.getElementsByTagName("h2")[0]),t.appendChild(n);for(var i=n.querySelector("ul"),r=0;r<e.content.length;r++){var o=document.createElement("li"),s=document.createElement("a");o.appendChild(s),s.href=e.content[r].src,s.textContent=e.content[r].title,i.appendChild(o),s.addEventListener("click",function(e){e.preventDefault(),alert("Nicht Teil des Implementierungsumfangs")})}}}catch(c){}},build_excerpt=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(1>ec&&t){var n=$tpl_excerpt.cloneNode(!0);jde.set_textNode("Textauszug",n.getElementsByTagName("h2")[0]),t.appendChild(n);var i=n.querySelector("blockquote");jde.xhr("GET",e.src,null,function(e){i.innerHTML=e.responseText}),ec++,$textbox=$doc.getElementById("excerpt"),$back=$doc.getElementById("back"),switchViews()}}catch(r){}},build_obj=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(1>oc&&t){var n=$tpl_obj.cloneNode(!0);jde.set_textNode("Objekt",n.getElementsByTagName("h2")[0]);var i=n.querySelector("figure");if(e.src&&e.description){var r="maxw",o=document.createElement("img"),s=new Image;s.onload=function(){s.height>s.width&&(r="maxh"),n.classList.add(r)},s.src=e.src,o.src=e.src,o.alt=e.description,i.appendChild(o),t.appendChild(n),oc++,$objbox=$doc.getElementById("obj"),alertDesc(e.description)}}}catch(c){}},build_content=function(e){"use strict";var t,n=e.responseText,i=JSON.parse(n),r=!1;main_title=i.title||err_head,$errorbox.style.display="none",$title.empty(),$errorhead.empty(),$errortxt.empty(),jde.set_textNode(main_title,$title);for(var o=0;o<i.content_items.length;o++){switch(t=i.content_items[o],t.type){case"objekt":build_obj(t);break;case"textauszug":build_excerpt(t),r=!0;break;case"medienverweise":build_mediabox(t)}o!=i.content_items.length-1||r||build_backlink()}},empty_content=function(){oc=0,ec=0,$left.empty(),$right.empty(),$middle.empty(),$back.empty()},reload_content=function(e){empty_content(),jde.xhr("GET",e,null,function(e){build_content(e)},function(e){build_errorcontent(e)}),set_nextJsonConfig();var t=configs[currentConfigId].lastIndexOf("/");config_switch.textContent=configs[currentConfigId].substr(t+1)},load_content=function(){"use strict";empty_content();var e=jde.get_config("config"),t=document.getElementById("config_switch");if(e){var n=configs[get_nextJsonConfig()],i=e.localeCompare(n);0==i&&set_nextJsonConfig()}else e=configs[currentConfigId];t.addEventListener("click",function(e){e.preventDefault(),reload_content(configs[get_jsonConfig()])}),reload_content(e)},jde.addLoadEvent(load_content);