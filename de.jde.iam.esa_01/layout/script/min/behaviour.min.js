
var jde={addLoadEvent:function(t){"use strict";if("function"==typeof t){var e=window.onload;window.onload="function"!=typeof window.onload?t:function(){e(),t()}}},get_config:function(t){for(var e=window.location.search.substring(1),s=e.split("&"),i=0;i<s.length;i++){var n=s[i].split("=");if(n[0]==t)return n[1]}return!1},set_attr:function(t,e,s){"use strict";var i=t;i.setAttribute(e,s)},set_href:function(t,e){"use strict";var s=t;s.setAttribute("href",e)},set_title:function(t,e){"use strict";var s=t;s.setAttribute("title",e)},set_class:function(t,e){"use strict";var s=t;s.classList.add(e)},set_id:function(t,e){"use strict";var s=t;s.setAttribute("id",e)},set_width:function(t,e){"use strict";var s=t;s.setAttribute("width",e)},set_height:function(t,e){"use strict";var s=t;s.setAttribute("height",e)},remove_class:function(t,e){"use strict";var s=t;s.classList.remove(e)},create_link:function(t,e,s,i){"use strict";var n=document.createElement("a");return this.set_title(n,t),this.set_href(n,e),this.set_attr(n,"id",s),this.set_attr(n,"onclick",i),n},get_cNode:function(t,e,s){"use strict";var i=e.getElementsByClassName(t),n=i.length;return n>0&&n>s?i[s]:!1},xhr:function(t,e,s,i,n){"use strict";var r,o=new XMLHttpRequest,a=null;e&&(a=0===e.indexOf("/")?e.substring(1):e,o.onreadystatechange=function(){4===o.readyState&&(200===o.status&&i?i(o):n&&n(o))},o.open(t,a,!0),s&&(r=JSON.stringify(s),o.setRequestHeader("Content-type","application/json")),o.setRequestHeader("Accept","application/json, application/xml, text/html, text/plain"),s?o.send(r):o.send())},set_textNode:function(t,e){"use strict";var s=document.createTextNode(t);e.appendChild(s)}};HTMLElement.prototype.empty=function(){for(var t=this;t.hasChildNodes();)t.removeChild(t.lastChild)};
var dpath="/data/die_umsiedlerin.json",err_head="Es ist ein Fehler aufgetreten",err_txt="Die Daten konnten nicht geladen werden.",configs=["/data/die_umsiedlerin.json","/data/der_bau.json","/data/uebungen/ue2_1.json","/data/uebungen/ue2_2.json","/data/uebungen/ue2_3.json"];currentConfigId=0,ec=0,oc=0,$textbox=null,$back=null,$objbox=null,$doc=document,$body=$doc.body,$back=$doc.getElementById("back"),$title=$doc.getElementById("main_title"),$article=$doc.getElementsByTagName("article").item(0),$left=$doc.getElementById("left"),$middle=$doc.getElementById("middle"),$right=$doc.getElementById("right"),$tpls=$doc.getElementById("templates"),$tpl_mediabox=$tpls.getElementsByClassName("media_link")[0],$tpl_excerpt=$doc.getElementById("excerpt"),$tpl_obj=$doc.getElementById("obj"),$errorbox=$doc.getElementById("statusbox"),$errortxt=$doc.getElementById("errortxt"),$errorhead=$doc.getElementById("errorhead"),$tpl_mediabox.parentNode.removeChild($tpl_mediabox),$tpl_excerpt.parentNode.removeChild($tpl_excerpt),$tpl_obj.parentNode.removeChild($tpl_obj);var alertDesc=function(e){"use strict";if($objbox){var t=$objbox.querySelector(".more"),i=$objbox.querySelector(".more img"),n=jde.create_link("Bildbeschreibung anzeigen","final_index.html","morelink","show_description('"+e+"'); return false;");n.appendChild(i),t.appendChild(n)}},switchJsonConfig=function(){currentConfigId<configs.length-1?currentConfigId+=1:currentConfigId=0},show_description=function(e){"use strict";alert(e)},switchViews=function(){"use strict";if($textbox&&$back){var e=jde.get_cNode("more",$textbox,0);if(e){var t=jde.create_link("Den kompletten Text anzeigen","index.html","morelink","show_animatedDetail(); return false;"),i=document.createTextNode("Weiter lesen ...");t.appendChild(i),e.appendChild(t)}var n=jde.create_link("Zurück zur Übersicht","index.html","backlink","show_animatedOverview(); return false;"),r=document.createTextNode("Zurück"),o=document.createElement("span");o.appendChild(r),n.appendChild(o),$back.appendChild(n)}},show_simpleDetail=function(){"use strict";jde.set_id($body,"detail")},show_simpleOverview=function(){"use strict";jde.set_id($body,"overview")},timer,_isOverview=!0,_isAnimated=!1,is_overview=function(){"use strict";return _isOverview},set_overview=function(e){"use strict";_isOverview=e},is_animated=function(){"use strict";return _isAnimated},set_animated=function(e){"use strict";_isAnimated=e},clear=function(e){"use strict";clearTimeout(e),set_animated(!1)},end_animation=function(e){"use strict";"opacity"==e.propertyName&&(jde.remove_class($article,"hide"),jde.remove_class($article,"show"),jde.remove_class($body,"view"),$body.removeEventListener("transitionend",end_animation,!1))},show_article=function(e){jde.set_class($article,"show"),jde.remove_class($article,"hide"),clear(e)},show_view=function(e){"use strict";"opacity"==e.propertyName&&($body.removeEventListener("transitionend",show_view,!1),jde.set_class($body,"view"),is_overview()?jde.set_id($body,"detail"):jde.set_id($body,"overview"),timer=setTimeout(function(){show_article()},500),$body.addEventListener("transitionend",end_animation,!1),set_overview(!is_overview()))},show_overview=function(){"use strict";jde.set_id($body,"overview"),jde.set_class($article,"show"),set_overview(!0)},show_animatedDetail=function(){"use strict";$article?!is_animated()&&is_overview()&&(jde.set_class($article,"hide"),set_animated(!0),$body.addEventListener("transitionend",show_view,!1)):show_simpleDetail()},show_animatedOverview=function(){"use strict";$article?is_animated()||is_overview()||(jde.set_class($article,"hide"),set_animated(!0),$body.addEventListener("transitionend",show_view,!1)):show_simpleOverview()};build_errorcontent=function(){"use strict";$errorhead.empty(),jde.set_textNode(err_head,$errorhead),$errortxt.empty(),jde.set_textNode(err_txt,$errortxt),$errorbox.style.display="block"},build_mediabox=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(t){var i=$tpl_mediabox.cloneNode(!0);jde.set_textNode(e.title||"Medien",i.getElementsByTagName("h2")[0]),t.appendChild(i);for(var n=i.querySelector("ul"),r=0;r<e.content.length;r++){var o=document.createElement("li"),d=document.createElement("a");o.appendChild(d),d.href=e.content[r].src,d.textContent=e.content[r].title,n.appendChild(o)}}}catch(a){}},build_excerpt=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(1>ec&&t){var i=$tpl_excerpt.cloneNode(!0);jde.set_textNode("Textauszug",i.getElementsByTagName("h2")[0]),t.appendChild(i);var n=i.querySelector("blockquote");jde.xhr("GET",e.src,null,function(e){n.innerHTML=e.responseText}),ec++,$textbox=$doc.getElementById("excerpt"),$back=$doc.getElementById("back"),switchViews()}}catch(r){alert(r)}},build_obj=function(e){"use strict";try{var t=document.getElementById(e.render_container);if(1>oc&&t){var i=$tpl_obj.cloneNode(!0);jde.set_textNode("Objekt",i.getElementsByTagName("h2")[0]);var n=i.querySelector("figure");if(e.src&&e.description){var r="maxw",o=document.createElement("img"),d=new Image;d.onload=function(){d.height>d.width&&(r="maxh"),i.classList.add(r)},d.src=e.src,o.src=e.src,o.alt=e.description,n.appendChild(o),t.appendChild(i),oc++,$objbox=$doc.getElementById("obj"),alertDesc(e.description)}}}catch(a){alert(a)}},build_content=function(e){"use strict";var t,i=e.responseText,n=JSON.parse(i),r=n.title||err_head;$errorbox.style.display="none",$title.empty(),$errorhead.empty(),$errortxt.empty(),jde.set_textNode(r,$title);for(var o=0;o<n.content_items.length;o++)switch(t=n.content_items[o],t.type){case"objekt":build_obj(t);break;case"textauszug":build_excerpt(t);break;case"medienverweise":build_mediabox(t)}},reload_content=function(){var e=configs[currentConfigId].lastIndexOf("/");config_switch.textContent=configs[currentConfigId].substr(e+1)},load_content=function(){"use strict";alert("test"),oc=0,ec=0,$left.empty(),$right.empty(),$middle.empty();var e=jde.get_config("config");config_switch=document.getElementById("config_switch"),alert(typeof config_switch),config_switch.addEventListener("click",function(e){alert("test"),e.preventDefault(),switchJsonConfig(),reload_content()}),e||(e=dpath)},jde.addLoadEvent(load_content);